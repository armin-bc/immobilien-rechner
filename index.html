
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Immobilienrechner - Erweitert</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: sans-serif; margin: 2rem; background: #f8fafc; }
    h1 { color: #1e293b; }
    canvas { margin-top: 2rem; max-width: 600px; }
    button { margin-right: 10px; margin-top: 1rem; padding: 0.5rem 1rem; border: none; background: #2563eb; color: white; border-radius: 6px; cursor: pointer; }
    button:hover { background: #1e40af; }
    textarea { width: 100%; height: 80px; margin-top: 1rem; font-family: monospace; }
  </style>
</head>
<body>
  <h1>Immobilienanalyse</h1>
  <div>
    <button onclick="generateChart()">ðŸ“Š Diagramm anzeigen</button>
    <button onclick="downloadPDF()">ðŸ“„ PDF-Export</button>
    <button onclick="downloadCSV()">ðŸ“‘ CSV-Export</button>
    <button onclick="saveScenario()">ðŸ’¾ Szenario speichern</button>
    <button onclick="loadScenario()">ðŸ”„ Szenario laden</button>
  </div>
  <canvas id="myChart"></canvas>
  <textarea id="scenarioStorage" placeholder="Hier erscheint das gespeicherte Szenario..."></textarea>

<script>
function generateChart() {
  const ctx = document.getElementById("myChart");
  new Chart(ctx, {
    type: "bar",
    data: {
      labels: ["Cashflow", "Kosten", "Miete", "Rendite"],
      datasets: [{
        label: "JÃ¤hrlich (â‚¬)",
        data: [3500, 1800, 12000, 7.5],
        backgroundColor: ["#16a34a", "#f97316", "#3b82f6", "#9333ea"]
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false }
      }
    }
  });
}

function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.text("Immobilienanalyse - Zusammenfassung", 10, 10);
  doc.text("Cashflow: 3500 â‚¬", 10, 20);
  doc.text("Kosten: 1800 â‚¬", 10, 30);
  doc.text("Miete: 12000 â‚¬", 10, 40);
  doc.text("Rendite: 7.5 %", 10, 50);
  doc.save("analyse.pdf");
}

function downloadCSV() {
  const csvContent = "Kennzahl,Wert\nCashflow,3500\nKosten,1800\nMiete,12000\nRendite,7.5%";
  const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
  const url = URL.createObjectURL(blob);
  const link = document.createElement("a");
  link.setAttribute("href", url);
  link.setAttribute("download", "analyse.csv");
  link.click();
}

function saveScenario() {
  const scenario = {
    cashflow: 3500,
    kosten: 1800,
    miete: 12000,
    rendite: 7.5
  };
  localStorage.setItem("immobilienSzenario", JSON.stringify(scenario));
  document.getElementById("scenarioStorage").value = JSON.stringify(scenario, null, 2);
}

function loadScenario() {
  const data = localStorage.getItem("immobilienSzenario");
  document.getElementById("scenarioStorage").value = data ? data : "Kein Szenario gefunden.";
}
</script>
</body>
</html>
